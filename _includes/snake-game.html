<div style="max-width: 100%; margin: 60px auto 40px auto; padding: 30px; background: var(--card-bg); border: 1px solid var(--main-border-color); border-radius: 4px; font-family: inherit;">
  <h3 style="color: var(--heading-color); margin: 0 0 20px 0; font-size: 18px; text-align: center;">Quick Snake Game</h3>

  <div style="display: flex; justify-content: center; margin-bottom: 20px;">
    <canvas id="snakeCanvas" width="400" height="400" style="border: 2px solid var(--main-border-color); background: var(--main-bg); display: block;"></canvas>
  </div>

  <div style="text-align: center; margin-bottom: 15px;">
    <p style="color: var(--text-color); margin: 0 0 10px 0; font-size: 14px;">
      Score: <span id="score" style="color: var(--link-color); font-weight: bold;">0</span>
    </p>
    <button
      id="startBtn"
      style="padding: 10px 20px; border: 1px solid var(--main-border-color); background: var(--button-bg); color: var(--text-color); font-size: 14px; cursor: pointer; transition: all 0.2s; font-family: inherit; border-radius: 3px;"
      onmouseover="this.style.background='var(--card-bg)'; this.style.borderColor='var(--link-color)'; this.style.color='var(--link-color)';"
      onmouseout="this.style.background='var(--button-bg)'; this.style.borderColor='var(--main-border-color)'; this.style.color='var(--text-color)';"
    >
      Start Game
    </button>
  </div>

  <p style="color: var(--text-muted-color); margin: 0; font-size: 12px; text-align: center;">Use arrow keys or WASD to move</p>
</div>

<script>
const canvas = document.getElementById('snakeCanvas');
const ctx = canvas.getContext('2d');
const scoreDisplay = document.getElementById('score');
const startBtn = document.getElementById('startBtn');

const gridSize = 20;
const tileCount = canvas.width / gridSize;

let snake = [{x: 10, y: 10}];
let food = {x: Math.floor(Math.random() * tileCount), y: Math.floor(Math.random() * tileCount)};
let direction = {x: 1, y: 0};
let nextDirection = {x: 1, y: 0};
let score = 0;
let gameRunning = false;
let gameSpeed = 100;

function drawGame() {
  // Clear canvas
  ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--main-bg');
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // Draw snake
  ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--link-color');
  snake.forEach(segment => {
    ctx.fillRect(segment.x * gridSize + 1, segment.y * gridSize + 1, gridSize - 2, gridSize - 2);
  });

  // Draw food
  ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--heading-color');
  ctx.fillRect(food.x * gridSize + 1, food.y * gridSize + 1, gridSize - 2, gridSize - 2);
}

function updateGame() {
  if (!gameRunning) return;

  direction = nextDirection;

  // Calculate new head
  const head = {x: snake[0].x + direction.x, y: snake[0].y + direction.y};

  // Check wall collision
  if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) {
    endGame();
    return;
  }

  // Check self collision
  if (snake.some(segment => segment.x === head.x && segment.y === head.y)) {
    endGame();
    return;
  }

  snake.unshift(head);

  // Check food collision
  if (head.x === food.x && head.y === food.y) {
    score += 10;
    scoreDisplay.textContent = score;
    food = {x: Math.floor(Math.random() * tileCount), y: Math.floor(Math.random() * tileCount)};
    gameSpeed = Math.max(50, gameSpeed - 2);
  } else {
    snake.pop();
  }

  drawGame();
}

function endGame() {
  gameRunning = false;
  ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--heading-color');
  ctx.font = 'bold 24px Arial';
  ctx.textAlign = 'center';
  ctx.fillText('Game Over!', canvas.width / 2, canvas.height / 2 - 20);
  ctx.font = '16px Arial';
  ctx.fillText(`Final Score: ${score}`, canvas.width / 2, canvas.height / 2 + 20);
  startBtn.textContent = 'Play Again';
}

function startGame() {
  snake = [{x: 10, y: 10}];
  food = {x: Math.floor(Math.random() * tileCount), y: Math.floor(Math.random() * tileCount)};
  direction = {x: 1, y: 0};
  nextDirection = {x: 1, y: 0};
  score = 0;
  gameSpeed = 100;
  scoreDisplay.textContent = score;
  startBtn.textContent = 'Start Game';
  gameRunning = true;

  const gameLoop = setInterval(() => {
    updateGame();
  }, gameSpeed);

  const handleKeyPress = (e) => {
    if (!gameRunning) {
      clearInterval(gameLoop);
      document.removeEventListener('keydown', handleKeyPress);
      return;
    }

    const key = e.key.toLowerCase();
    if (key === 'arrowup' || key === 'w') {
      if (direction.y === 0) nextDirection = {x: 0, y: -1};
    } else if (key === 'arrowdown' || key === 's') {
      if (direction.y === 0) nextDirection = {x: 0, y: 1};
    } else if (key === 'arrowleft' || key === 'a') {
      if (direction.x === 0) nextDirection = {x: -1, y: 0};
    } else if (key === 'arrowright' || key === 'd') {
      if (direction.x === 0) nextDirection = {x: 1, y: 0};
    }
  };

  document.addEventListener('keydown', handleKeyPress);
}

startBtn.addEventListener('click', startGame);
drawGame();
</script>
